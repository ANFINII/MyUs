{% extends 'base2.html' %}
{% block title %}<title>MyUsアカウント</title>{% endblock title %}
{% load static %}

{% block content %}
<main class="main">
  <form method="POST" action="" enctype="multipart/form-data">
    {% csrf_token %}
    <article class="article_account">
      <h1>アカウント設定</h1>
      {% if messages %}
      <ul class="messages_profile">
        {% for message in messages %}
        <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li><br>
        {% endfor %}
      </ul>
      {% endif %}

      <div class="btn-column">
        <div class="btn-column1">
          <button type="submit" class="button green xs">登録</button>
        </div>
        <div class="btn-column2">
          <button type="button" href="{% url 'myus:profile' %}" class="button blue xs pjax_button">戻る</button>
        </div>
      </div>

      <table class="table">
        <tbody>
          <tr><td class="td-color">アカウント画像</td>
            <td valign="baseline">
              <label for="account_image_input" class="update_account_image">
                <svg xmlns="http://www.w3.org/2000/svg" width="3.5em" height="3.5em" fill="currentColor" class="bi bi-person-square" viewBox="0 0 16 16">
                  <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                  <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z"/>
                </svg>
                <input type="file" name="avatar" accept="image/*" id="account_image_input" class="custom-file-input">
              </label>
            </td>
          </tr>
          <tr><td class="td-color">メールアドレス</td><td><input type="text" name="email" value="{{ user.email }}" maxlength="120" class="form-control"></td></tr>
          <tr><td class="td-color">ユーザー名</td><td><input type="text" name="username" value="{{ user.username }}" maxlength="30" placeholder="英数字" class="form-control"></td></tr>
          <tr><td class="td-color">投稿者名</td><td><input type="text" name="nickname" value="{{ user.nickname }}" maxlength="60" class="form-control"></td></tr>
          <tr><td class="td-color">名前</td>
            <td>
              <div class="td-name">
                <input type="text" name="last_name" value="{{ user.profile.last_name }}" id="last_name" placeholder="姓" maxlength="30" class="form-control">
                <input type="text" name="first_name" value="{{ user.profile.first_name }}" id="first_name" placeholder="名" maxlength="30" class="form-control">
              </div>
            </td>
          </tr>
          <tr><td class="td-color">生年月日</td>
            <td>
              <div class="td-birthday">
                <select name="year" id="year" class="form-control">
                  <option value="{{ user.year }}" style="display:none;">{{ user.year }}</option>
                </select>
                <select name="month" id="month" class="form-control">
                  <option value="{{ user.month }}" style="display:none;">{{ user.month }}</option>
                </select>
                <select name="day" id="day" class="form-control">
                  <option value="{{ user.day }}" style="display:none;">{{ user.day }}</option>
                </select>
              </div>
            </td>
          </tr>
          <tr><td class="td-color">年齢</td><td class="td-indent">{{ user.age }}歳</td></tr>
          <tr>
            <td class="td-color">性別</td>
            <td class="td-gender">
              {% for key, gender in gender.items %}
              <div class="form-check-inline">
                <input type="radio" name="gender" value="{{ key }}" id="gender_{{ key }}" class="custom-control-input" {% if user.gender == key %} checked {% endif %}>
                <label for="gender_{{ key }}" class="custom-control-label">{{ gender }}</label>
              </div>
              {% endfor %}
            </td>
          </tr>
          <tr><td class="td-color">電話番号</td><td><input type="tel" name="phone" value="{{ user.profile.phone }}" maxlength="15" class="form-control" required></td></tr>
          <tr><td class="td-color">郵便番号</td><td><input type="tel" name="postal_code" value="{{ user.profile.postal_code }}" maxlength="8" class="form-control" required></td></tr>
          <tr><td class="td-color">住所</td>
            <td class="td-location">
              <select name="prefecture" id="prefecture" class="form-control location1">
                <option value="">都道府県</option>
                <option value="{{ user.prefecture }}" style="display:none;" selected>{{ user.prefecture }}</option>
              </select>
              <input type="text" name="city" value="{{ user.city }}" placeholder="市区町村" maxlength="255" class="form-control location2">
              <input type="text" name="address" value="{{ user.address }}" placeholder="丁番地" maxlength="255" class="form-control location3">
              <input type="text" name="building" value="{{ user.building }}" placeholder="建物名" maxlength="255" class="form-control location4">
            </td>
          </tr>
          <tr><td class="td-color">自己紹介</td><td><textarea name="introduction" rows="1" class="form-control textarea">{{ user.profile.introduction }}</textarea></td></tr>
        </tbody>
      </table>

      {% include 'parts/footer-myus.html' %}
    </article>
  </form>
</main>
{% endblock content %}

{% block extrajs %}
<script src="{% static 'js/date.js' %}"></script>
<script src="{% static 'js/prefecture.js' %}"></script>
{% endblock extrajs %}
