{% extends 'base2.html' %}
{% block title %}<title>MyUsライブ</title>{% endblock title %} 

{% load static %}
{% load humanize %}

{% block content %}
<main class="main_contents">
    <article class="article_detail">
    {% if object.publish %}
        <div class="main-image-color">
            <div class="main-image">
                <video id="video" class="video-js vjs-fluid vjs-big-play-centered vjs-16-9" controls preload="none" poster="{{ object.images.url }}" data-setup='{"playbackRates": [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2]}'>
                    <source src="{{ object.lives.url }}" type="video/mp4" label="2160p" res="2160">
                    <source src="{{ object.lives.url }}" type="video/mp4" label="1080p" res="1080">
                    <source src="{{ object.lives.url }}" type="video/mp4" label="720p" res="720">
                    <source src="{{ object.lives.url }}" type="video/mp4" label="480p" res="480">
                    <source src="{{ object.lives.url }}" type="video/mp4" label="240p" res="240">
                    <track kind="captions" src="{% static 'vtt/captions.ja.vtt' %}" srclang="en" label="English">
                    <track kind="subtitles" src="{% static 'vtt/captions.ja.vtt' %}" srclang="en" label="English">
                    <p class="vjs-no-js">この動画を見るには、JavaScriptを有効にしてください!
                        <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
                    </p>
                </video>
            </div>
        </div>
        
        <div class="article_detail_section">
            <div class="article_detail_section_1">
                <div class="article_detail_aria">
                    <h1 title="{{ object.title }}">{{ object.title }}</h1>
                
                    <time class="article_detail_aria_1">{{ object.created|date:'Y/m/d H:i' }}</time>
                
                    <div class="article_detail_aria_2">
                        <div class="read">
                            <i class="bi bi-caret-right-square icon-font" title="閲覧数"></i>
                            {{ object.read|intcomma }}
                        </div>
                        {% if user.is_authenticated %}
                            <form method="POST" action="{% url 'myus:live_like' %}">{% csrf_token %}
                                {% if liked %}
                                <button type="submit" name="livemodel_id" value="{{ object.id }}" class="like_form like_fill">
                                    <i class="bi bi-hand-thumbs-up-fill icon-font like_color" title="いいね"></i>
                                </button>
                                {% else %}
                                <button type="submit" name="livemodel_id" value="{{ object.id }}" class="like_form like_no">
                                    <i class="bi bi-hand-thumbs-up icon-font like_color" title="いいね"></i>
                                </button>
                                {% endif %}
                                <span class="like_count">{{ object.total_like|intcomma }}</span>
                            </form>
                        {% else %}
                            <i class="bi bi-hand-thumbs-up icon-font" title="いいね"></i>
                            <span>{{ object.total_like|intcomma }}</span>
                        {% endif %}
                    </div>
                
                    <div class="article_detail_aria_3">
                        {% include 'parts/tag.html' %}
                    </div>
                </div>
                <hr>
                {% include 'parts/detail_common.html' %}
            </div>
            <div class="article_detail_section_2">
                {% include 'parts/article_live.html' %}
            </div>
        </div>
        {% else %}
        <h2 class="unpublished">非公開に設定されてます！</h2>
    {% endif %}
    </article>
</main>
{% endblock content %}

{% block extrajs %}
<script src="{% static 'js/ajax.js' %}"></script>
{% endblock extrajs %}